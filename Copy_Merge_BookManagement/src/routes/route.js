//=====================Importing Module and Packages=====================//
const express = require('express');
const router = express.Router();
const { createUser, login } = require("../Controller/userController");
const { createBooks, getAllBook, getBooksByPathParam, updateBookbyId, deletebyId } = require("../Controller/bookController");
const { bookValidation, userValidation } = require("../Validator/validate")
const { createReview, updateReviewByBookId, deletebyreviewId } = require("../Controller/reviewController")
const { authentication, authorisation } = require("../middleware/auth")

//////////////////////////////////create User Api/////////////////////////////////////////////////////////////////////////////
router.post("/register", userValidation, createUser);
//////////////////////////////////Login Api/////////////////////////////////////////////////////////////////////////////
router.post("/login", login);


//////////////////////////////////create Books Api/////////////////////////////////////////////////////////////////////////////
router.post("/books", bookValidation, authentication,authorisation, createBooks);
//////////////////////////////////Get All Books  Api/////////////////////////////////////////////////////////////////////////////
router.get("/books",authentication, getAllBook);
//////////////////////////////////Get Books Details  Api/////////////////////////////////////////////////////////////////////////////
router.get("/books/:bookId",authentication, getBooksByPathParam);
//////////////////////////////////Update Books Api/////////////////////////////////////////////////////////////////////////////
router.put("/books/:bookId", authentication, authorisation, updateBookbyId);
//////////////////////////////////Delete Books Api/////////////////////////////////////////////////////////////////////////////
router.delete("/books/:bookId", authentication, authorisation, deletebyId)


//////////////////////////////////Create Reviews Api/////////////////////////////////////////////////////////////////////////////
router.post("/books/:bookId/review", createReview);
/////////////////////////////////Update Reviews Api/////////////////////////////////////////////////////////////////////////////
router.put("/books/:bookId/review/:reviewId", updateReviewByBookId)
    //////////////////////////////////Delete Reviews Api/////////////////////////////////////////////////////////////////////////////
router.delete("/books/:bookId/review/:reviewId", deletebyreviewId);

router.all("/*", (req, res) => { res.status(400).send({ status: false, error: " please enter a valid request " }); });




//=====================Module Export=====================//
module.exports = router;